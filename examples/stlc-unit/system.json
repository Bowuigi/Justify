{
  "description": "Simply-typed lambda calculus with a unit type",
  "syntax": {
    "term": {
      "description": "Terms",
      "suggestions": ["e"],
      "grammar": [
        {
          "id": "variable",
          "description": "Variable $x$",
          "tex_parts": [],
          "fixity": "none",
          "arguments": [
            {"from": "identifier", "id": "x", "tex": "x"}
          ]
        },
        {
          "id": "lambda",
          "description": "Binds the applied term of type $t$ to the variable $x$ in $e$",
          "tex_parts": ["\\lambda", ":", ".\\,"],
          "fixity": "prefix",
          "arguments": [
            {"from": "identifier", "id": "x", "tex": "x"},
            {"from": "type", "id": "t", "tex": "\\tau"},
            {"from": "term", "id": "e", "tex": "e"}
          ]
        },
        {
          "id": "apply",
          "description": "Applies $e_2$ to $e_1$, performing beta reduction",
          "tex_parts": ["\\;"],
          "fixity": "infix",
          "arguments": [
            {"from": "term", "id": "e1", "tex": "e_1"},
            {"from": "term", "id": "e2", "tex": "e_2"}
          ]
        },
        {
          "id": "star",
          "description": "The only term of type $\\mathbf{1}$",
          "tex_parts": ["\\star"],
          "fixity": "none",
          "arguments": []
        }
      ]
    },
    "type": {
      "description": "Types",
      "suggestions": ["\\tau", "A", "B"],
      "grammar": [
        {
          "id": "arrow",
          "description": "A function from $A$ to $B$",
          "tex_parts": ["\\rightarrow"],
          "fixity": "infix",
          "arguments": [
            {"from": "type", "id": "t1", "tex": "A"},
            {"from": "type", "id": "t2", "tex": "B"}
          ]
        },
        {
          "id": "unit",
          "description": "A type with only one inhabitant, $\\star$",
          "tex_parts": ["\\mathbf{1}"],
          "fixity": "none",
          "arguments": []
        }
      ]
    },
    "context": {
      "description": "Contexts",
      "suggestions": ["\\Gamma"],
      "grammar": [
        {
          "id": "empty",
          "description": "Empty context, empty environment",
          "tex_parts": ["\\cdot"],
          "fixity": "none",
          "arguments": []
        },
        {
          "id": "extend",
          "description": "A cons operation for contexts (here, assoc lists)",
          "tex_parts": [",", ":"],
          "fixity": "infix",
          "arguments": [
            {"from": "context", "id": "ctx", "tex": "\\Gamma"},
            {"from": "identifier", "id": "x", "tex": "x"},
            {"from": "type", "id": "t", "tex": "\\tau"}
          ]
        }
      ]
    }
  },
  "relations": {
    "judge": {
      "description": "Term $e$ has type $\\tau$ on context $\\Gamma$",
      "tex_parts": ["\\vdash", ":"],
      "fixity": "infix",
      "arguments": [
        {"from": "context", "id": "ctx", "tex": "\\Gamma"},
        {"from": "term", "id": "tm", "tex": "e"},
        {"from": "type", "id": "ty", "tex": "\\tau"}
      ],
      "rules": [
        {
          "rule": {"id": "app", "tex": "App"},
          "variables": {
            "e1": "e_1",
            "e2": "e_2",
            "a": "A",
            "b": "B",
            "ctx": "\\Gamma"
          },
          "literals": {},
          "patterns": {
            "ctx": {"is": "ref", "to": "ctx"},
            "tm": {"is": "con", "from": "term", "tag": "apply", "args": [{"is": "ref", "to": "e1"}, {"is": "ref", "to": "e2"}]},
            "ty": {"is": "ref", "to": "b"}
          },
          "premises": [
            {
              "relation": "judge",
              "args": [
                {"is": "ref", "to": "ctx"},
                {"is": "ref", "to": "e1"},
                {"is": "con", "from": "type", "tag": "arrow", "args": [{"is": "ref", "to": "a"}, {"is": "ref", "to": "b"}]}
              ]
            },
            {
              "relation": "judge",
              "args": [
                {"is": "ref", "to": "ctx"},
                {"is": "ref", "to": "e2"},
                {"is": "ref", "to": "a"}
              ]
            }
          ]
        },
        {
          "rule": {"id": "lam", "tex": "Lam"},
          "variables": {
            "ctx": "\\Gamma",
            "x": "x",
            "a": "A",
            "b": "B",
            "e": "e"
          },
          "literals": {},
          "patterns": {
            "ctx": {"is": "ref", "to": "ctx"},
            "tm": {"is": "con", "from": "term", "tag": "lambda", "args": [{"is": "ref", "to": "x"}, {"is": "ref", "to": "a"}, {"is": "ref", "to": "e"}]},
            "ty": {"is": "con", "from": "type", "tag": "arrow", "args": [{"is": "ref", "to": "a"}, {"is": "ref", "to": "b"}]}
          },
          "premises": [
            {
              "relation": "judge",
              "args": [
                {"is": "con", "from": "context", "tag": "extend", "args": [{"is": "ref", "to": "ctx"}, {"is": "ref", "to": "x"}, {"is": "ref", "to": "a"}]},
                {"is": "ref", "to": "e"},
                {"is": "ref", "to": "b"}
              ]
            }
          ]
        },
        {
          "rule": {"id": "unit", "tex": "Unit"},
          "variables": {
            "ctx": "\\Gamma"
          },
          "literals": {},
          "patterns": {
            "ctx": {"is": "ref", "to": "ctx"},
            "tm": {"is": "con", "from": "term", "tag": "star", "args": []},
            "ty": {"is": "con", "from": "type", "tag": "unit", "args": []}
          },
          "premises": []
        },
        {
          "rule": {"id": "var", "tex": "Var"},
          "variables": {
            "ctx": "\\Gamma",
            "x": "x",
            "t": "\\tau"
          },
          "literals": {},
          "patterns": {
            "ctx": {"is": "ref", "to": "ctx"},
            "tm": {"is": "con", "from": "term", "tag": "variable", "args": [{"is": "ref", "to": "x"}]},
            "ty": {"is": "ref", "to": "t"}
          },
          "premises": [
            {
              "relation": "member",
              "args": [
                {"is": "ref", "to": "x"},
                {"is": "ref", "to": "t"},
                {"is": "ref", "to": "ctx"}
              ]
            }
          ]
        }
      ]
    },
    "member": {
      "description": "Identifier $x$ inside context $\\Gamma$ has type $\\tau$",
      "tex_parts": [":", "\\in"],
      "fixity": "infix",
      "arguments": [
        {"from": "identifier", "id": "ident", "tex": "x"},
        {"from": "type", "id": "ty", "tex": "\\tau"},
        {"from": "context", "id": "ctx", "tex": "\\Gamma"}
      ],
      "rules": [
        {
          "rule": {"id": "found", "tex": "Found"},
          "variables": {
            "x": "x",
            "t": "\\tau",
            "ctx": "\\Gamma"
          },
          "literals": {},
          "patterns": {
            "ident": {"is": "ref", "to": "x"},
            "ty": {"is": "ref", "to": "t"},
            "ctx": {"is": "con", "from": "context", "tag": "extend", "args": [{"is": "ref", "to": "ctx"}, {"is": "ref", "to": "x"}, {"is": "ref", "to": "t"}]}
          },
          "premises": []
        },
        {
          "rule": {"id": "next", "tex": "Next"},
          "variables": {
            "x": "x",
            "y": "y",
            "t1": "\\tau",
            "t2": "\\sigma",
            "ctx": "\\Gamma"
          },
          "literals": {},
          "patterns": {
            "ident": {"is": "ref", "to": "x"},
            "ty": {"is": "ref", "to": "t1"},
            "ctx": {"is": "con", "from": "context", "tag": "extend", "args": [{"is": "ref", "to": "ctx"}, {"is": "ref", "to": "y"}, {"is": "ref", "to": "t2"}]}
          },
          "premises": [
            {
              "relation": "member",
              "args": [
                {"is": "ref", "to": "x"},
                {"is": "ref", "to": "t1"},
                {"is": "ref", "to": "ctx"}
              ]
            }
          ]
        }
      ]
    }
  }
}
